# מעקב ובקרה - מערכת טוטו שלוש

מסמך זה מסביר את מערכת המעקב והבקרה המקיפה המיושמת באפליקציית טוטו שלוש.

## 🚀 סקירה כללית

האפליקציה משתמשת בגישה רב-שכבתית למעקב ובקרה כדי להבטיח אמינות, ביצועים ומעקב אחר חוויית המשתמש.

## 📊 ערימת המעקב

### 1. **Sentry** - מעקב שגיאות ומעקב ביצועים
- **מטרה**: מעקב שגיאות בזמן אמת, מעקב ביצועים ורישום פעולות משתמש
- **Dashboard**: https://sentry.io
- **פרויקט**: `atzmai/javascript-nextjs`
- **תכונות**:
  - מעקב שגיאות JavaScript/React
  - מעקב שגיאות API
  - זיהוי צווארי בקבוק בביצועים
  - רישום פעולות משתמש (session replay)
  - Source maps לדיבוג טוב יותר
  - התראות מייל לשגיאות קריטיות

### 2. **Vercel Analytics** - אנליטיקס התנהגות משתמשים
- **מטרה**: מעקב התנהגות משתמשים ומדדי ביצועי דפים
- **Dashboard**: https://vercel.com/dashboard → Project → Analytics
- **תכונות**:
  - צפיות בדפים ומבקרים ייחודיים
  - Core Web Vitals (LCP, FID, CLS)
  - נתוני תעבורה בזמן אמת
  - התפלגות גיאוגרפית של משתמשים
  - אנליטיקס מכשירים ודפדפנים
  - מעקב אירועים מותאמים אישית

### 3. **Uptime Robot** - מעקב זמינות מערכת
- **מטרה**: מעקב זמינות מערכת 24/7 והתראות
- **Dashboard**: https://uptimerobot.com
- **נקודות קצה מנוטרות**:
  - אפליקציה ראשית: `https://toto-shlush-modern.vercel.app`
  - בדיקת בריאות: `https://toto-shlush-modern.vercel.app/api/health`
  - API נתונים: `https://toto-shlush-modern.vercel.app/api/data`
- **תכונות**:
  - מרווחי מעקב של 5 דקות
  - התראות מייל ו-SMS
  - היסטוריית זמינות וסטטיסטיקות
  - מעקב זמן תגובה

### 4. **Custom Health Check API** - מעקב בריאות מערכת
- **נקודת קצה**: `/api/health`
- **מטרה**: מעקב בריאות מערכת מקיף
- **בדיקות**:
  - חיבור למסד נתונים Redis/KV
  - מעקב שימוש זיכרון
  - מידע סביבה
  - בריאות נקודות קצה API פנימיות
  - מדדי זמן תגובה

## 🔔 הגדרת התראות

### התראות Sentry
- **התראות מייל** לשגיאות חדשות
- **התראות ביצועים** לפעולות איטיות
- **התראות פריסה** לפריסות חדשות

### התראות Uptime Robot
- **התראות מייל** לזמינות מערכת נמוכה
- **התראות SMS** לכשלים קריטיים (מוגבל בגרסה החינמית)
- **התראות התאוששות** כשהמערכות חוזרות לפעילות

## 📈 מדדים עיקריים מנוטרים

### מעקב שגיאות
- שגיאות זמן ריצה JavaScript
- כשלי נקודות קצה API
- בעיות חיבור למסד נתונים
- צווארי בקבוק בביצועים

### אנליטיקס משתמשים
- צפיות בדפים וסשנים
- מעקב מסע משתמש
- ביצועי Core Web Vitals
- התפלגות גיאוגרפית

### בריאות מערכת
- אחוז זמינות
- זמני תגובה
- חיבור למסד נתונים
- שימוש זיכרון

## 🛠️ הוראות הגדרה

### למפתחים
1. **Sentry**: גישה דרך https://sentry.io עם פרטי הפרויקט
2. **Vercel Analytics**: זמין ב-Vercel dashboard תחת טאב Analytics
3. **Uptime Robot**: הגדרת מוניטורים ב-https://uptimerobot.com
4. **Health Check**: גישה דרך נקודת הקצה `/api/health`

### הגדרת התראות
1. **Sentry**: לך ל-Project Settings → Alerts → הגדר התראות מייל
2. **Uptime Robot**: לך ל-My Settings → Alert Contacts → הוסף אנשי קשר מייל/SMS

## 📱 התראות נייד ו-WhatsApp (אופציונלי)

### אינטגרציה WhatsApp דרך Zapier
1. צור חשבון Zapier (גרסה חינמית זמינה)
2. הגדר webhook trigger מ-Sentry/Uptime Robot
3. הגדר פעולת WhatsApp Business
4. בדוק את האינטגרציה

## 🔍 פתרון בעיות

### בעיות נפוצות
- **שגיאות אימות**: בדוק הגדרות נראות פרויקט Vercel
- **התראות חסרות**: ודא הגדרת מייל/SMS בכלי המעקב
- **כשלי health check**: בדוק הגדרות מסד נתונים ונקודות קצה API

### פקודות דיבוג
```bash
# בדוק נקודת בריאות
curl https://toto-shlush-modern.vercel.app/api/health

# צפה בשגיאות Sentry
# לך ל-https://sentry.io → Project → Issues

# בדוק סטטוס זמינות
# לך ל-https://uptimerobot.com → Dashboard
```

## 📊 כתובות Dashboards

| שירות | כתובת | מטרה |
|---------|-----|---------|
| **Sentry** | https://sentry.io | מעקב שגיאות וביצועים |
| **Vercel Analytics** | https://vercel.com/dashboard | אנליטיקס התנהגות משתמשים |
| **Uptime Robot** | https://uptimerobot.com | מעקב זמינות מערכת |
| **Health Check** | /api/health | סטטוס בריאות מערכת |

## 🎯 שיטות עבודה מומלצות

1. **מעקב קבוע**: בדוק dashboards יומית לבעיות
2. **כוונון התראות**: התאם ספי התראות למניעת false positives
3. **אופטימיזציה ביצועים**: השתמש בנתוני Core Web Vitals לשיפור חוויית משתמש
4. **פתרון שגיאות**: התייחס לשגיאות Sentry במהירות לשמירת יציבות המערכת

## 📞 תמיכה

לבעיות הקשורות למעקב:
- בדוק את תיעוד השירות הרלוונטי
- סקור הגדרות התראות
- ודא נגישות נקודות קצה
- פנה לתמיכת השירות במידת הצורך

---

**עדכון אחרון**: דצמבר 2024  
**מתחזק על ידי**: צוות הפיתוח
